# General routes for the Group module.
group.group_settings:
  path: 'admin/group/settings'
  defaults:
    _form: '\Drupal\group\Form\GroupSettingsForm'
    _title: 'Group Settings'
  requirements:
    _permission: 'administer group'

# Group entity routes, common routes are generated by \Drupal\group\Entity\Routing\GroupRouteProvider.
group.group_add:
  path: '/group/add'
  defaults:
    _title: 'Add group'
    _controller: '\Drupal\group\Entity\Controller\GroupController::addPage'
  options:
    _group_operation_route: TRUE
  requirements:
    _group_add_access: 'group'

group.add:
  path: '/group/add/{group_type}'
  defaults:
    _controller: '\Drupal\group\Entity\Controller\GroupController::add'
    _title_callback: '\Drupal\group\Entity\Controller\GroupController::addPageTitle'
  requirements:
    _group_add_access: 'group:{group_type}'
  options:
    _group_operation_route: TRUE
    parameters:
      group_type:
        with_config_overrides: TRUE

entity.group.collection:
  path: '/group/list'
  defaults:
    _entity_list: 'group'
    _title: 'Groups'
  options:
    _group_operation_route: TRUE
  requirements:
    _permission: 'administer group'

# Group type entity routes.
group.type_add:
  path: '/admin/group/types/add'
  defaults:
    _entity_form: 'group_type.add'
    _title: 'Add group type'
  requirements:
    _permission: 'administer group'

group_type.content:
  path: '/admin/group/types/manage/{group_type}/content'
  defaults:
    _controller: '\Drupal\group\Entity\Controller\GroupTypeController::content'
    _title: 'Configure available content'
  requirements:
    _permission: 'administer group'

entity.group_type.collection:
  path: '/admin/group/types'
  defaults:
    _entity_list: 'group_type'
    _title: 'Group types'
  requirements:
    _permission: 'administer group'

entity.group_type.edit_form:
  path: '/admin/group/types/manage/{group_type}'
  defaults:
    _entity_form: 'group_type.edit'
  requirements:
    _permission: 'administer group'

entity.group_type.delete_form:
  path: '/admin/group/types/manage/{group_type}/delete'
  defaults:
    _entity_form: 'group_type.delete'
    _title: 'Delete'
  requirements:
    _entity_access: 'group_type.delete'

entity.group_type.permissions_form:
  path: '/admin/group/types/manage/{group_type}/permissions'
  defaults:
    _form: '\Drupal\group\Form\GroupPermissionsTypeSpecificForm'
    _title: 'Edit group type permissions'
  requirements:
    _permission: 'administer group'

# Group role entity routes.
group.role_add:
  path: '/admin/group/roles/add'
  defaults:
    _entity_form: 'group_role.add'
    _title: 'Add group role'
  requirements:
    _permission: 'administer group'

entity.group_role.collection:
  path: '/admin/group/roles'
  defaults:
    _entity_list: 'group_role'
    _title: 'Group roles'
  requirements:
    _permission: 'administer group'

entity.group_role.edit_form:
  path: '/admin/group/roles/manage/{group_role}'
  defaults:
    _entity_form: 'group_role.edit'
  requirements:
    _permission: 'administer group'

entity.group_role.delete_form:
  path: '/admin/group/roles/manage/{group_role}/delete'
  defaults:
    _entity_form: 'group_role.delete'
    _title: 'Delete'
  requirements:
    _entity_access: 'group_role.delete'

entity.group_role.permissions_form:
  path: '/admin/group/roles/manage/{group_role}/permissions'
  defaults:
    _form: '\Drupal\group\Form\GroupPermissionsRoleSpecificForm'
    _title: 'Edit group role permissions'
  requirements:
    _permission: 'administer group'

# Group content type entity routes.
group_content_type.install:
  path: '/admin/group/content/install/{group_type}/{plugin_id}'
  defaults:
    _controller: '\Drupal\group\Entity\Controller\GroupTypeController::enableContent'
    _title: 'Enable plugin'
  requirements:
    _permission: 'administer group'

# todo rename to delete_form, trigger plugin removal, show confirm form, add 'entity.' in front of route?
group_content_type.uninstall:
  path: '/admin/group/content/manage/{group_content_type}/uninstall'
  defaults:
    _controller: '\Drupal\group\Entity\Controller\GroupTypeController::disableContent'
    _title: 'Disable plugin'
  requirements:
    _permission: 'administer group'

entity.group_content_type.configure_form:
  path: '/admin/group/content/manage/{group_content_type}'
  defaults:
    _controller: '\Drupal\group\Entity\Controller\GroupTypeController::configureContent'
    _title: 'Configure plugin'
  requirements:
    _permission: 'administer group'
